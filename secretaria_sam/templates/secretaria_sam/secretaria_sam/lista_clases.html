{% extends "gentelella/production/plain_page.html" %}
{% load staticfiles %}
{% load extras %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
 {% block cabecera %}  
    
    <link rel="stylesheet" href="{% static 'contact-form/css/datepicker.min.css' %}">
    <link rel="stylesheet" href="{% static 'contact-form/css/datepicker3.min.css' %}">
    <link rel="stylesheet" href="{% static 'contact-form/css/sb-admin-2.css' %}">
    <link rel="stylesheet" href="{% static 'contact-form/css/style.css' %}" type="text/css">

  {% endblock%}  

 
   </head> 

 {%block contenido %}


    <div class="container_fluid">

    <div class="container page-header">
        <div class="row">
            <div class="col-md-4">
                <img src="{% static 'logo.png' %}" width="100" height="100">
            </div></br>
            <div class="col-md-8" "col-sm-8" "col-xs-8" align="right">
                <h1>Montebello Academy</h1>
                <h3>Clases</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <ol class="breadcrumb">

                  <li class="active">Clases</li>
                </ol>
            </div>
        </div>        
    </div>

    <div class="container page-body">
        <div class="row">
            <div class="col-md-9">
                {% if clases %}
                    
                <table id="tabla" class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>Clase</th>
                            <th>Sección</th>
                            <th>Homeroom</th>
                            <th>Capacidad</th>
                            <th>Estudiantes Matriculados</th>
                        </tr>
                    </thead>
                    {% for clase in clases %}
                    <tr>
                        <td><a href="/secretaria/clases/{{clase.pk}}">{{clase.nivel}} {{clase.paralelo}}</a></td>
                        <td>{{clase.nivel.seccion}}</td>
                        <td>
                            {% for y in clase.homeroom_registry_set.all %}
                                {% if y.fin  == None %}
                                    {{y.homeroom}}
                                {% endif %}
                            {% endfor %}
                        </td>
                        <td>{{clase.capacidad}}</td>
                        <td>{{clase.matricula_set.all|length}}</td>
                    </tr>
                    {% endfor %}
                </table>
                {% else %}
                <p>No existen clases para este período lectivo.</p>   
                {% endif %}
            </div>

            <div class = "col-md-3">

                <h3 class="text-right"><strong>Resumen</strong></h3>
                <div class="row">
                    <h4 class="col-md-9 text-right">Estudiantes por Matricular</h4>
                    <h4 class="col-md-3 text-right"><a href="..">{{aptos.count}}</a></h4>
                </div>
                <div class="row">
                    <h4 class="col-md-9 text-right">Estudiantes Retirados</h4>
                    <h4 class="col-md-3 text-right"><a href="../retirados">{{inactivos.count}}</a></h4>
                </div>
                <h3 class="text-right"><strong>Reportes</strong></h3>
                <div class="text-right">No existen reportes configurados</div>               
            </div>
        </div>            
    </div>
</div>







{% endblock %}



 {% block scripts %}
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="{% static 'contact-form/js/bootstrap.min.js'%}"></script>
    <script src="{% static 'contact-form/js/modernizr.js' %}" type="text/javascript"></script>
    <script src="{% static 'contact-form/js/jquery.min.js' %}"></script>
    <script src="{% static 'contact-form/js/bootstrap.min.js'%}"></script>
    <script src="{% static 'contact-form/js/bootstrapvalidator.min.js'%}"></script>
    <script src="{% static 'contact-form/js/bootstrap-datepicker.min.js'%}"></script>
    <script src="{% static 'contact-form/js/index.js'%}"></script>





    <link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css">





    <script src="{% static 'contact-form/js/index.js'%}"></script>



    <script src="{% static 'templates/gentelella/vendors/datatables.net/js/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'templates/gentelella/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js' %}"></script>
    <script src="{% static 'templates/gentelella/vendors/datatables.net-buttons/js/dataTables.buttons.min.js' %}"></script>
    <script src="{% static 'templates/gentelella/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js' %}"></script>
    <script src="{% static 'templates/gentelella/vendors/datatables.net-buttons/js/buttons.flash.min.js' %}"></script>
    <script src="{% static 'templates/gentelella/vendors/datatables.net-buttons/js/buttons.html5.min.js' %}"></script>
    <script src="{% static 'templates/gentelella/vendors/datatables.net-buttons/js/buttons.print.min.js' %}"></script>
    <script src="{% static 'templates/gentelella/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js' %}"></script>
    <script src="{% static 'templates/gentelella/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js' %}"></script>
    <script src="{% static 'templates/gentelella/vendors/datatables.net-responsive/js/dataTables.responsive.min.js' %}"></script>
    <script src="{% static 'templates/gentelella/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js' %}"></script>
    <script src="{% static 'templates/gentelella/vendors/datatables.net-scroller/js/dataTables.scroller.min.js' %}"></script>
    <script src="{% static 'templates/gentelella/vendors/jszip/dist/jszip.min.js' %}"></script>
    <script src="{% static 'templates/gentelella/vendors/pdfmake/build/pdfmake.min.js' %}"></script>

    <script src="{% static 'templates/gentelella/vendors/datatables.net/plugins/accent-neutralise.js' %}"></script>

    <script src="{% static 'templates/gentelella/vendors/pdfmake/build/vfs_fonts.js' %}"></script>    

<script>


    function getGrade(name) {
     
        var rankNumber;
         
        if (name.indexOf("Inicial 1")!= -1) {
            rankNumber = 1;
        } else if (name.indexOf("Inicial 2")!= -1){
            rankNumber = 2;
        } else if (name.indexOf("Prekinder")!= -1) {
            rankNumber = 3;
        } else if (name.indexOf("Kinder")!= -1) {
            rankNumber = 4;
        } else if (name.indexOf("Elementary A")!= -1) {
            rankNumber = 5;
        } else if(name.indexOf("Elementary B")!= -1){
            rankNumber = 6;
        } else if(name.indexOf("Elementary C")!= -1){
            rankNumber = 7;
        } else if(name.indexOf("Elementary D")!= -1){
            rankNumber = 8;
        } else if(name.indexOf("Middle A")!= -1){
            rankNumber = 9;                        
        } else if(name.indexOf("Middle B")!= -1){
            rankNumber = 10;
        } else if(name.indexOf("Middle C")!= -1){
            rankNumber = 11;
        } else if(name.indexOf("Middle D")!= -1){
            rankNumber = 12;
        } else if(name.indexOf("Preparatory A")!= -1){
            rankNumber = 13;
        } else if(name.indexOf("Preparatory B")!= -1){
            rankNumber = 14;
        } else if(name.indexOf("Preparatory C")!= -1){
            rankNumber = 15;
        } else if(name.indexOf("Preparatory D")!= -1){
            rankNumber = 16;                                
        } else {
            rankNumber = 0;
        }
         
        return rankNumber;
    }


    jQuery.fn.dataTableExt.oSort['grades-asc']  = function(a,b) {

        var x = getGrade(a);
        var y = getGrade(b);
        x = parseFloat( x );
        y = parseFloat( y );
        return ((x < y) ? -1 : ((x > y) ?  1 : 0));

    };

    jQuery.fn.dataTableExt.oSort['grades-desc'] = function(a,b) {

        var x = getGrade(a);
        var y = getGrade(b);
        x = parseFloat( x );
        y = parseFloat( y );
        return ((x < y) ? 1 : ((x > y) ?  -1 : 0));
    };


    $(document).ready(function(){
        var table = $('#tabla').dataTable( {
            "language": {
                "url": "{% static 'templates/gentelella/vendors/datatables.net/plugins/Spanish.json' %}"
            },
            "aoColumns": [
                { "sType": "grades" },
                null,
                {"bSortable": false},
                {"bSortable": false},
                null,
            ]           
        } );

      $('input').keyup( function () {
        table
          .search(
            jQuery.fn.DataTable.ext.type.search.string( this.value )
          )
          .draw()
      });

    });


</script>


  {% endblock %}

   
    
</body>
</html>